# Руководство по участию в проекте

Этот документ описывает правила работы с репозиторием и процесс разработки.

---

## 1. Общие принципы

- Прямые коммиты в `main` запрещены
- Любая работа выполняется через Issue
- Одна задача = одна ветка
- Все изменения вносятся через Pull Request в `main`
- Минимум 1 одобрение перед слиянием

---

## 2. Работа с Issue

Перед началом работы необходимо:

1. Создать Issue (или Sub-issue от Issue с общим описанием)
2. Описать:
   - Что нужно реализовать
   - Технические детали (если есть)
   - Критерии готовности (Definition of Done)

Без созданного Issue работа не начинается.

Пример названия Issue:
Реализовать отрисовку прямоугольника

---

## 3. Правила именования веток

Формат:

feature/<номер-issue>-краткое-описание  
fix/<номер-issue>-краткое-описание  

Примеры:

feature/12-add-rectangle  
fix/15-selection-bug  

Ветка создаётся от `main`.

---

## 4. Процесс работы

**Шаг 1. Актуализировать main:**
```bash
git checkout main
git pull
```

**Шаг 2. Создать рабочую ветку:**
```bash
git checkout -b feature/<номер-issue>-описание
```

**Шаг 3. Реализовать задачу:**    
Пишите код, тестируйте локально.

**Шаг 4. Сделать коммит:**
```bash
git add .
git commit -m "Краткое описание (#12)"
```

**Шаг 4.1. Обновить ветку через rebase (ВАЖНО!)**
Если пока вы работали, в `main` попали изменения от других участников, нужно «перебазировать» вашу ветку на актуальную версию. Это даёт линейную историю без лишних merge-коммитов.   

```bash
# 1. Обновите изменения  main с сервера (без переключения веток) из текущей ветки (feature/<номер-issue>-описание)
git fetch origin

# 2. Ребазируем на origin/main
git rebase origin/main

# 3. Возвращаемся на свою ветку:   
git checkout feature/<номер-issue>-описание

# ⚠️ Если возникли конфликты:
#    - Исправьте ошибки в файлах вручную.
#    - Добавьте исправленные файлы: git add .
#    - Продолжите процесс: git rebase --continue
#    (Повторяйте, пока rebase не завершится успешно)
```

**Шаг 5. Отправить ветку:**
Так как rebase переписывает историю коммитов, при первой отправке или после обновления ветки используйте флаг `--force-with-lease` (это безопасно перезапишет ветку на сервере):

```bash
git push --force-with-lease origin feature/<номер-issue>-описание
```

**Шаг 6. Создать Pull Request в `main`**   
Перейдите в интерфейс репозитория и создайте PR из вашей ветки в `main`.   

**Шаг 7. Обновление локального main**   
```
# После успешного rebase:
git checkout main
git pull   # Обновляем локальную main до актуального состояния
```   

---

## 5. Правила Pull Request

PR должен:

- Ссылаться на Issue/Sub-issue (Closes #12)
- Содержать понятное описание изменений
- Не содержать ошибок
- Быть протестирован вручную

Перед слиянием требуется минимум 1 одобрение.

Все замечания ревью должны быть устранены.

---

## 6. Слияние и удаление веток

После одобрения PR:

- Изменения сливаются в `main`
- Рабочая ветка удаляется (автоматически или вручную)

Включена настройка автоматического удаления веток после merge.

---

## 7. Требования к коду

- Код должен быть читаемым
- Не допускаются неиспользуемые файлы
- В финальной версии не должно быть отладочных логов
- Соблюдать согласованную архитектуру

---

Соблюдение этих правил обеспечивает прозрачность изменений и стабильность основной ветки.

## 9. Сборка и запуск

### Devcontainer

VSC Extension: https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers

Собрать контейнер и открыть проект: `F1 -> Dev Containers: Rebuild and Reopen in Container`

Любой используемый инструмент должен быть добавлен в описание контейнера.